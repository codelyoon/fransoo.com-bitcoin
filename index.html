<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>fransoo.com | Finance Portal</title>
  <style>
    body {background:#000;color:#00bfff;font-family:'Courier New',monospace;margin:0;overflow:hidden;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative}
    #static-canvas {position:absolute;top:0;left:0;width:100%;height:100%;opacity:0.15;pointer-events:none;z-index:1}
    .container {z-index:2;text-align:center;max-width:900px;width:100%;padding:20px;box-sizing:border-box}
    .typing {font-size:20px;white-space:pre-line}
    .cursor {display:inline-block;width:10px;height:22px;background:#00bfff;animation:blink 1s infinite;vertical-align:middle}
    @keyframes blink {0%,50%{opacity:1}51%,100%{opacity:0}}
    #price-box {position:absolute;top:20px;right:20px;font-size:28px;font-weight:bold;letter-spacing:1px;z-index:3}
    .up {color:#00ff00}
    .down {color:#ff0044}
    #chart-container {margin-top:30px;width:100%;height:60vh;background:#000;border:1px solid #00bfff;position:relative}
    canvas#chart {width:100%;height:100%;display:block}
    #timeframe-select {position:absolute;top:10px;left:10px;z-index:3;background:#000;border:1px solid #00bfff;color:#00bfff;padding:8px 12px;font-family:'Courier New',monospace;font-size:14px}
    #timeframe-select option {background:#000;color:#00bfff}
  </style>
</head>
<body>
  <canvas id="static-canvas"></canvas>
  <div id="price-box">BTC $--.---</div>
  <div class="container">
    <div class="typing" id="typing"></div>
    <div id="chart-container">
      <select id="timeframe-select">
        <option value="1h">1H</option>
        <option value="1d" selected>1D</option>
        <option value="7d">7D</option>
        <option value="30d">30D</option>
        <option value="ytd">YTD</option>
        <option value="all">ALL</option>
      </select>
      <canvas id="chart"></canvas>
    </div>
  </div>

  <script>
    // Static noise
    const sc = document.getElementById('static-canvas');
    const sctx = sc.getContext('2d');
    sc.width = innerWidth; sc.height = innerHeight;
    window.addEventListener('resize',()=>{sc.width=innerWidth;sc.height=innerHeight});
    (function noise(){const d=sctx.createImageData(sc.width,sc.height);const b=new Uint32Array(d.data.buffer);
      for(let i=0;i<b.length;i++)if(Math.random()<0.09)b[i]=0x33ffffff;sctx.putImageData(d,0,0);requestAnimationFrame(noise);})();

    const intro = `welcome to the fransoo.com finance portal

here's the live BTC chart & price`;
    const typingEl = document.getElementById('typing');
    function type(t,e,cb){let i=0;const x=setInterval(()=>{if(i<t.length){e.innerHTML+=t[i]==='\n'?'<br>':t[i];i++}else{clearInterval(x);cb&&cb()}},45);}
    type(intro, typingEl, () => typingEl.innerHTML += '<span class="cursor"></span>');

    const chartCanvas = document.getElementById('chart');
    const ctx = chartCanvas.getContext('2d');
    const priceBox = document.getElementById('price-box');
    const select = document.getElementById('timeframe-select');

    function resize() {
      chartCanvas.width = chartCanvas.offsetWidth * devicePixelRatio;
      chartCanvas.height = chartCanvas.offsetHeight * devicePixelRatio;
      ctx.setTransform(devicePixelRatio, 0, 0, devicePixelRatio, 0, 0);
    }
    window.addEventListener('resize', resize);
    resize();

    let currentPrice = 0, change24h = 0;

    async function updatePrice() {
      const r = await fetch('https://api.binance.com/api/v3/ticker/24hr?symbol=BTCUSDT');
      const d = await r.json();
      currentPrice = parseFloat(d.lastPrice);
      change24h = parseFloat(d.priceChangePercent);
      priceBox.innerHTML = `BTC $${currentPrice.toLocaleString('en-US',{minimumFractionDigits:0,maximumFractionDigits:0})} 
        <span class="${change24h>=0?'up':'down'}">${change24h>=0?'↑':'↓'}${Math.abs(change24h).toFixed(2)}%</span>`;
    }

    async function loadChart(tf) {
      let interval, limit;
      if (tf==='1h')   { interval='1m'; limit=60; }
      if (tf==='1d')   { interval='1h'; limit=24; }
      if (tf==='7d')   { interval='4h'; limit=42; }
      if (tf==='30d')  { interval='1d'; limit=30; }
      if (tf==='ytd')  { interval='1d'; limit=365; }
      if (tf==='all')  { interval='1d'; limit=2500; }

      const r = await fetch(`https://api.binance.com/api/v3/klines?symbol=BTCUSDT&interval=${interval}&limit=${limit}`);
      const data = await r.json();

      const prices = data.map(k => parseFloat(k[4]));
      const times = data.map(k => new Date(k[0]));

      draw(prices, times, tf);
    }

    function draw(prices, times, tf) {
      resize();
      const w = chartCanvas.width / devicePixelRatio;
      const h = chartCanvas.height / devicePixelRatio;
      ctx.clearRect(0,0,w,h);

      const pad = 60;
      const chartW = w - 2*pad;
      const chartH = h - 2*pad;

      const maxP = Math.max(...prices);
      const minP = Math.min(...prices);
      const range = maxP - minP || 1;

      // Fill
      ctx.fillStyle = 'rgba(0,191,255,0.08)';
      ctx.beginPath();
      ctx.moveTo(pad, h-pad);
      prices.forEach((p,i) => {
        const x = pad + (i/(prices.length-1))*chartW;
        const y = h-pad - ((p-minP)/range)*chartH;
        ctx.lineTo(x,y);
      });
      ctx.lineTo(w-pad, h-pad);
      ctx.closePath();
      ctx.fill();

      // Line
      ctx.strokeStyle = '#00bfff';
      ctx.lineWidth = 2;
      ctx.beginPath();
      prices.forEach((p,i) => {
        const x = pad + (i/(prices.length-1))*chartW;
        const y = h-pad - ((p-minP)/range)*chartH;
        i===0 ? ctx.moveTo(x,y) : ctx.lineTo(x,y);
      });
      ctx.stroke();

      // Grid + Y labels
      ctx.strokeStyle = '#003340';
      ctx.lineWidth = 1;
      ctx.fillStyle = '#00bfff';
      ctx.font = '14px monospace';
      ctx.textAlign = 'right';
      for(let i=0;i<=4;i++){
        const y = pad + i*(chartH/4);
        ctx.beginPath();
        ctx.moveTo(pad,y);
        ctx.lineTo(w-pad,y);
        ctx.stroke();

        const priceVal = maxP - (i*(range/4));
        ctx.fillText(`$${priceVal.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",")}`, w-pad-8, y+5);
      }

      // X labels
      ctx.textAlign = 'center';
      const steps = 5;
      for(let i=0;i<=steps;i++){
        const idx = Math.round(i*(prices.length-1)/steps);
        const x = pad + idx*chartW/(prices.length-1);
        let label;
        if(tf==='1h') label = `${60-i*12}m`;
        else if(tf==='1d') label = `${24-i*6}h`;
        else if(tf==='7d') label = `${7-i}D`;
        else if(tf==='30d') label = `${30-6*i}D`;
        else {
          const date = times[idx];
          label = tf==='all' ? date.getFullYear() : `${date.toLocaleDateString('en-US',{month:'short',day:'numeric'})}`;
        }
        ctx.fillText(label, x, h-pad+20);
      }

      // Border
      ctx.strokeStyle = '#00bfff';
      ctx.lineWidth = 1;
      ctx.strokeRect(pad, pad, chartW, chartH);
    }

    select.addEventListener('change', () => loadChart(select.value));
    updatePrice();
    loadChart('1d');
    setInterval(()=>{ updatePrice(); loadChart(select.value); }, 30000);
  </script>
</body>
</html>
